{
    "name": "vscode-dotnet-deploy",
    "displayName": "Dotnet 部署工具",
    "description": "通过 SSH 将 .NET 应用程序部署到 Ubuntu/Linux 服务器",
    "version": "0.1.71",
    "publisher": "local",
    "repository": {
        "type": "git",
        "url": "https://github.com/interface95/vscode-dotnet-deploy.git"
    },
    "engines": {
        "vscode": "^1.85.0"
    },
    "categories": [
        "Other"
    ],
    "activationEvents": [
        "onView:dotnetDeploy.sidebar"
    ],
    "main": "./out/extension.js",
    "contributes": {
        "commands": [
            {
                "command": "dotnetDeploy.openDashboard",
                "title": "Open Advanced Dashboard",
                "icon": "$(settings-gear)"
            },
            {
                "command": "dotnetDeploy.openSetupWizard",
                "title": "Dotnet Deploy: 配置交叉编译环境",
                "icon": "$(tools)"
            },
            {
                "command": "dotnetDeploy.openCrossCompileDocs",
                "title": "Dotnet Deploy: 交叉编译安装教程",
                "icon": "$(book)"
            },
            {
                "command": "dotnetDeploy.openMacOSPackageConfig",
                "title": "Dotnet Deploy: macOS 打包配置",
                "icon": "$(package)"
            },
            {
                "command": "dotnetDeploy.configure",
                "title": "Dotnet Deploy: Configure Settings",
                "icon": "$(gear)"
            },
            {
                "command": "dotnetDeploy.refresh",
                "title": "Refresh Projects",
                "icon": "$(refresh)"
            }
        ],
        "viewsContainers": {
            "activitybar": [
                {
                    "id": "dotnetDeploy",
                    "title": "Dotnet Deploy",
                    "icon": "resources/deploy.svg"
                }
            ]
        },
        "views": {
            "dotnetDeploy": [
                {
                    "type": "webview",
                    "id": "dotnetDeploy.sidebar",
                    "name": "Deploy"
                }
            ]
        },
        "menus": {
            "view/title": [
                {
                    "command": "dotnetDeploy.configure",
                    "when": "view == dotnetDeploy.sidebar",
                    "group": "navigation"
                }
            ]
        },
        "configuration": {
            "title": "Dotnet 部署工具",
            "properties": {
                "dotnetDeploy.server.host": {
                    "type": "string",
                    "default": "",
                    "description": "SSH 服务器主机名或 IP"
                },
                "dotnetDeploy.server.port": {
                    "type": "number",
                    "default": 22,
                    "description": "SSH 端口"
                },
                "dotnetDeploy.server.username": {
                    "type": "string",
                    "default": "root",
                    "description": "SSH 用户名"
                },
                "dotnetDeploy.server.privateKeyPath": {
                    "type": "string",
                    "default": "~/.ssh/id_rsa",
                    "description": "SSH 私钥路径"
                },
                "dotnetDeploy.deploy.remotePath": {
                    "type": "string",
                    "default": "/opt/apps",
                    "description": "远程部署目录"
                },
                "dotnetDeploy.deploy.afterUploadCommand": {
                    "type": "string",
                    "default": "sudo {remote_path}/{app_name} start",
                    "description": "文件上传后执行的远程命令 (支持变量: {app_name}, {remote_path})",
                    "editPresentation": "multilineText"
                },
                "dotnetDeploy.publish.selfContained": {
                    "type": "boolean",
                    "default": true,
                    "description": "独立发布 (包含运行时)"
                },
                "dotnetDeploy.publish.singleFile": {
                    "type": "boolean",
                    "default": false,
                    "description": "发布为单文件"
                },
                "dotnetDeploy.publish.debugSymbols": {
                    "type": "boolean",
                    "default": false,
                    "description": "包含调试符号 (.pdb 文件)"
                },
                "dotnetDeploy.publish.aot": {
                    "type": "boolean",
                    "default": false,
                    "description": "启用 Native AOT 编译 (-p:PublishAot=true)"
                },
                "dotnetDeploy.publish.stripSymbols": {
                    "type": "boolean",
                    "default": false,
                    "description": "剥离符号 (-p:StripSymbols=true)"
                },
                "dotnetDeploy.publish.trim": {
                    "type": "boolean",
                    "default": false,
                    "description": "裁剪未使用的代码"
                },
                "dotnetDeploy.publish.invariantGlobalization": {
                    "type": "boolean",
                    "default": false,
                    "description": "无全球化依赖 (-p:InvariantGlobalization=true)"
                },
                "dotnetDeploy.publish.runtime": {
                    "type": "string",
                    "default": "linux-x64",
                    "description": "目标运行时标识符",
                    "enum": [
                        "linux-x64",
                        "linux-arm64",
                        "win-x64",
                        "win-x86",
                        "win-arm64",
                        "osx-x64",
                        "osx-arm64"
                    ]
                },
                "dotnetDeploy.upx.enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "启用 UPX 压缩 (支持 Linux/Windows 目标，macOS 目标不支持)"
                },
                "dotnetDeploy.upx.level": {
                    "type": "string",
                    "default": "--best",
                    "enum": [
                        "-1",
                        "-9",
                        "--best",
                        "--lzma"
                    ],
                    "description": "UPX 压缩级别 (需要先安装 upx: brew install upx)"
                },
                "dotnetDeploy.telegram.enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable Telegram notifications"
                },
                "dotnetDeploy.telegram.upload": {
                    "type": "boolean",
                    "default": false,
                    "description": "Upload build artifact to Telegram"
                },
                "dotnetDeploy.telegram.botToken": {
                    "type": "string",
                    "default": "",
                    "description": "Telegram Bot Token"
                },
                "dotnetDeploy.telegram.chatId": {
                    "type": "string",
                    "default": "",
                    "description": "Telegram Chat ID"
                },
                "dotnetDeploy.crossCompile.enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "启用交叉编译支持 (macOS → Linux/Windows)"
                },
                "dotnetDeploy.crossCompile.zigPath": {
                    "type": "string",
                    "default": "",
                    "description": "Zig 编译器路径 (留空则自动检测)"
                },
                "dotnetDeploy.crossCompile.xwinSdkPath": {
                    "type": "string",
                    "default": "~/.local/share/xwin-sdk",
                    "description": "Windows SDK 缓存目录 (用于 Windows 交叉编译)"
                },
                "dotnetDeploy.crossCompile.autoInstallTools": {
                    "type": "boolean",
                    "default": false,
                    "description": "自动安装缺失的交叉编译工具"
                },
                "dotnetDeploy.macos.enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "启用 macOS 打包 (生成 .app/.dmg/.pkg)"
                },
                "dotnetDeploy.macos.appName": {
                    "type": "string",
                    "default": "",
                    "description": "macOS 应用名称"
                },
                "dotnetDeploy.macos.bundleId": {
                    "type": "string",
                    "default": "com.example.app",
                    "description": "macOS Bundle Identifier"
                },
                "dotnetDeploy.macos.version": {
                    "type": "string",
                    "default": "1.0.0",
                    "description": "应用版本号"
                },
                "dotnetDeploy.macos.shortVersion": {
                    "type": "string",
                    "default": "",
                    "description": "应用短版本号"
                },
                "dotnetDeploy.macos.buildNumber": {
                    "type": "string",
                    "default": "1",
                    "description": "Build 号"
                },
                "dotnetDeploy.macos.format": {
                    "type": "string",
                    "default": "app",
                    "enum": [
                        "app",
                        "dmg",
                        "pkg"
                    ],
                    "description": "打包格式 (.app/.dmg/.pkg)"
                },
                "dotnetDeploy.macos.iconPath": {
                    "type": "string",
                    "default": "",
                    "description": "应用图标路径 (.icns 或 .png)"
                },
                "dotnetDeploy.macos.minimumOSVersion": {
                    "type": "string",
                    "default": "10.15",
                    "description": "最低支持的 macOS 版本"
                },
                "dotnetDeploy.macos.codeSign.enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "启用代码签名"
                },
                "dotnetDeploy.macos.codeSign.identity": {
                    "type": "string",
                    "default": "",
                    "description": "开发者证书 ID"
                },
                "dotnetDeploy.macos.codeSign.notarize": {
                    "type": "boolean",
                    "default": false,
                    "description": "提交 Apple 公证"
                },
                "dotnetDeploy.macos.codeSign.appleId": {
                    "type": "string",
                    "default": "",
                    "description": "Apple ID (用于公证)"
                },
                "dotnetDeploy.macos.codeSign.teamId": {
                    "type": "string",
                    "default": "",
                    "description": "Team ID"
                },
                "dotnetDeploy.macos.entitlements.appSandbox": {
                    "type": "boolean",
                    "default": false,
                    "description": "启用 App Sandbox"
                },
                "dotnetDeploy.macos.entitlements.networkClient": {
                    "type": "boolean",
                    "default": false,
                    "description": "允许出站网络连接"
                },
                "dotnetDeploy.macos.entitlements.networkServer": {
                    "type": "boolean",
                    "default": false,
                    "description": "允许入站网络连接"
                },
                "dotnetDeploy.macos.entitlements.fileReadWrite": {
                    "type": "boolean",
                    "default": false,
                    "description": "用户选择的文件读写权限"
                },
                "dotnetDeploy.macos.entitlements.downloadsReadWrite": {
                    "type": "boolean",
                    "default": false,
                    "description": "Downloads 文件夹读写权限"
                },
                "dotnetDeploy.macos.entitlements.picturesReadWrite": {
                    "type": "boolean",
                    "default": false,
                    "description": "Pictures 文件夹读写权限"
                },
                "dotnetDeploy.macos.entitlements.musicReadWrite": {
                    "type": "boolean",
                    "default": false,
                    "description": "Music 文件夹读写权限"
                },
                "dotnetDeploy.macos.entitlements.moviesReadWrite": {
                    "type": "boolean",
                    "default": false,
                    "description": "Movies 文件夹读写权限"
                },
                "dotnetDeploy.macos.entitlements.hardenedRuntime": {
                    "type": "boolean",
                    "default": false,
                    "description": "启用 Hardened Runtime"
                },
                "dotnetDeploy.macos.entitlements.allowJit": {
                    "type": "boolean",
                    "default": false,
                    "description": "允许 JIT 编译"
                },
                "dotnetDeploy.macos.entitlements.allowUnsignedMemory": {
                    "type": "boolean",
                    "default": false,
                    "description": "允许未签名的可执行内存"
                },
                "dotnetDeploy.macos.entitlements.allowDyldEnv": {
                    "type": "boolean",
                    "default": false,
                    "description": "允许 DYLD 环境变量"
                },
                "dotnetDeploy.macos.entitlements.disableLibraryValidation": {
                    "type": "boolean",
                    "default": false,
                    "description": "禁用库验证"
                },
                "dotnetDeploy.macos.entitlements.camera": {
                    "type": "boolean",
                    "default": false,
                    "description": "摄像头访问权限"
                },
                "dotnetDeploy.macos.entitlements.microphone": {
                    "type": "boolean",
                    "default": false,
                    "description": "麦克风访问权限"
                },
                "dotnetDeploy.macos.entitlements.location": {
                    "type": "boolean",
                    "default": false,
                    "description": "位置服务权限"
                },
                "dotnetDeploy.macos.entitlements.calendars": {
                    "type": "boolean",
                    "default": false,
                    "description": "日历访问权限"
                },
                "dotnetDeploy.macos.entitlements.contacts": {
                    "type": "boolean",
                    "default": false,
                    "description": "通讯录访问权限"
                },
                "dotnetDeploy.macos.entitlements.photos": {
                    "type": "boolean",
                    "default": false,
                    "description": "照片库访问权限"
                }
            }
        }
    },
    "scripts": {
        "vscode:prepublish": "npm run compile",
        "compile": "tsc -p ./",
        "watch": "tsc -watch -p ./",
        "lint": "eslint src --ext ts"
    },
    "devDependencies": {
        "@types/node": "^20.10.0",
        "@types/ssh2": "^1.11.0",
        "@types/ssh2-sftp-client": "^9.0.0",
        "@types/vscode": "^1.85.0",
        "typescript": "^5.3.0"
    },
    "dependencies": {
        "@vscode/webview-ui-toolkit": "^1.4.0",
        "ssh2": "^1.15.0",
        "ssh2-sftp-client": "^10.0.0"
    }
}
